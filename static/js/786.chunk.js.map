{"version":3,"file":"static/js/786.chunk.js","sources":["webpack://client/./src/common/form/components/FormModelInputs.tsx?7505","webpack://client/./src/common/form/components/ZodErrorMapper.tsx?c5be","webpack://client/./src/common/form/hooks/createModelFormHook.ts?68c2","webpack://client/./src/common/form/hooks/createValidationHook.ts?1eb9","webpack://client/./src/common/form/hooks/useFormValidations.ts?b49f","webpack://client/./src/common/form/hooks/useZoom.ts?bf86","webpack://client/./src/common/form/utils/isSuperPath.ts?b79c","webpack://client/./src/common/form/utils/pathSelector.ts?3828","webpack://client/./src/modules/bots/pages/BotDetails/BotChannels.tsx","webpack://client/./src/modules/bots/pages/BotDetails/BotConfigure.tsx","webpack://client/./src/modules/bots/pages/BotDetails/BotDetailsLayout.tsx","webpack://client/./src/modules/bots/pages/BotDetails/BotDetailsNav.tsx","webpack://client/./src/modules/bots/pages/BotDetails/BotEvents.tsx","webpack://client/./src/modules/bots/pages/BotDetails/BotNavHeader.tsx","webpack://client/./src/modules/bots/pages/BotDetails/BotSecrets.tsx","webpack://client/./src/modules/bots/pages/BotDetails/index.tsx"],"sourcesContent":["import { z } from \"zod\";\r\nimport { Label, Input, useId, makeStyles, tokens } from '@fluentui/react-components';\r\nimport {useCallback} from \"react\";\r\n\r\nimport { FormLens } from \"@tdp/common/form\";\r\nimport { ZodErrorMapper } from \"./ZodErrorMapper\";\r\n\r\nconst useStyles = makeStyles({\r\n    errorText: {\r\n        color: tokens.colorPaletteRedForeground1,\r\n    }\r\n});\r\nexport type FormModelInputProps = {\r\n    lens: FormLens<string>,\r\n    label: string\r\n    errorMapper?: (props: {id: string, className: string, issues: z.ZodIssue[]}) => JSX.Element\r\n};\r\nexport const FormModelInput = ({lens, label, errorMapper}: FormModelInputProps) => {\r\n    const classes = useStyles();\r\n    const onInputChange = useCallback((_:unknown, data: {value: string}) => {\r\n        lens.update(() => data.value);\r\n    }, [lens.update]);\r\n    const ErrorMapper = errorMapper ?? ZodErrorMapper;\r\n    const inputId = useId('form-model-input');\r\n    const errorsId = useId('form-model-input-errors');\r\n    return (\r\n        <>\r\n            <Label htmlFor={inputId}>{label}</Label>\r\n            <Input id={inputId} value={lens.current} onChange={onInputChange} aria-describedby={errorsId}/>\r\n            <ErrorMapper id={errorsId} className={classes.errorText} issues={lens.validationErrors}/>\r\n        </>\r\n    );\r\n};\r\n","import { ZodIssue } from 'zod';\r\n\r\ntype KnownErrorCode = ZodIssue['code'];\r\n\r\n//TODO(nibeauli): rig this up with the i18n system of choice so the errors are localized.\r\nconst errorMap: Record<KnownErrorCode, (issue: ZodIssue) => JSX.Element> = {\r\n    invalid_type: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_literal: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    unrecognized_keys: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_union: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_union_discriminator: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_enum_value: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_arguments: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_return_type: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_date: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_string: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    too_small: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    too_big: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    invalid_intersection_types: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    not_multiple_of: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    not_finite: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    },\r\n    custom: function (issue: ZodIssue): JSX.Element {\r\n        return <>{issue.message}</>;\r\n    }\r\n};\r\n\r\nexport type ZodErrorMapperProps = {\r\n    id: string, // id used for aria-describedby\r\n    className?: string,\r\n    issues: Zod.ZodIssue[],\r\n};\r\nexport const ZodErrorMapper = ({id, issues, className}: ZodErrorMapperProps) => {\r\n    //TODO(nibeauli): add bounds handling for issue.code\r\n    return (\r\n        <ul id={id} className={className}>\r\n            {issues.map((issue, index) => <li key={index}>{errorMap[issue.code](issue)}</li>)}\r\n        </ul>\r\n    );\r\n};\r\n","import { z, AnyZodObject } from 'zod';\r\nimport { type Immutable } from 'immer';\r\n\r\nimport { useTemporaryState } from '@tdp/common/shared/useTemporaryState';\r\nimport { ModelForm } from '@tdp/common/form';\r\n\r\nimport { createValidationHook } from './createValidationHook';\r\n\r\nexport function createModelFormHook<TSchema extends AnyZodObject>(schema: TSchema) {\r\n    const useValidation = createValidationHook(schema);\r\n\r\n    return function useModelForm(defaultValue: z.infer<TSchema>): ModelForm<TSchema> {\r\n        const { state, clearState, updateState } = useTemporaryState(defaultValue);\r\n        const validationErrors = useValidation(state);\r\n        return {\r\n            base: defaultValue as Immutable<typeof defaultValue>,\r\n            current: state as Immutable<typeof state>,\r\n            clear: clearState,\r\n            update: updateState,\r\n            validationErrors\r\n        };\r\n    };\r\n}\r\n","import { useMemo } from 'react';\r\nimport { z, AnyZodObject } from 'zod';\r\n\r\nexport function createValidationHook<TSchema extends AnyZodObject>(schema: TSchema) {\r\n    return function useValidation<TState extends z.infer<TSchema>>(state: TState) {\r\n        const validationErrors = useMemo(() => {\r\n            const result = schema.safeParse(state); // Assume no async validations, those would need something heavier than this hook can provide\r\n            if (result.success) return [];\r\n            return result.error.issues;\r\n        }, [state]);\r\n        return validationErrors;\r\n    };\r\n}\r\n","import { useMemo } from 'react';\r\nimport { Pathable, PathsSelectorFrom, pathsSelector as realizePaths, isSuperPath, FormLens } from '@tdp/common/form';\r\n\r\n/**\r\n * Creates a convenient consolidation of only the validation errors for a set of sub-parts of the model/form.\r\n * \r\n * This is exceptionally experimental and only supports validations right now. \r\n * \r\n * @param modelForm The model form\r\n * @param pathsSelector the selector into the sub-model/form\r\n * @returns a tuple of [isInvalid, validationErrors]\r\n */\r\nexport function useFormValidations<TSchema extends Pathable>(modelForm: FormLens<TSchema>, pathsSelector: PathsSelectorFrom<TSchema>) {\r\n    /*\r\n     * This is likely not an optimal or generalizable solution for traversal(s)\r\n     * read: https://hackage.haskell.org/package/optics-core-0.1/docs/Optics-Traversal.html\r\n     * read: https://www.schoolofhaskell.com/school/to-infinity-and-beyond/pick-of-the-week/a-little-lens-starter-tutorial#i-think-i-understand-prisms-now--what-are-traversals-\r\n     * As of right now, I don't see a clean and readably way to define traversals in TS as you can observe in the example here: \r\n     *  https://chrispenner.ca/posts/traversal-systems#keeping-references which shows how ugly this is without a DSL. Typescript has no first-class monad or way of declaring DSLs\r\n     * so I think we sidestep the issue by just writing bespoke traversals if/when needed such as this one. \r\n     */\r\n    const paths = useMemo(() => realizePaths(pathsSelector), [pathsSelector]);\r\n    // This is probably wildly inefficient for large forms with many validation errors. (NxMxL complexity for N errors, M paths and L path lengths)\r\n    const validationErrors = useMemo(() => modelForm.validationErrors\r\n        .filter(error => paths.some(path => isSuperPath(path, error.path))),\r\n        [modelForm.validationErrors, paths]);\r\n\r\n    return [validationErrors.length > 0, validationErrors] as const; //const cast so typescript knows it is a tuple.\r\n}\r\n","import { useCallback, useMemo } from 'react';\r\nimport { produce, Immutable } from 'immer';\r\nimport { get, set } from 'lodash';\r\n\r\nimport { PathSelector, Pathable, pathSelector as realizePath, isSuperPath, FormUpdater, FormLens } from '@tdp/common/form';\r\n\r\n/**\r\n * \"Zooms in\" on a specific path in the form model, providing a more convenient API for interacting with a section of the model/form.\r\n * @param modelForm The model fom\r\n * @param pathSelector a selector for the subpath of the model/form\r\n * @returns a lens for the interacting with the sub-form/model\r\n */\r\nexport function useZoom<TSchema extends Pathable, TValue>(\r\n    modelForm: FormLens<TSchema>,\r\n    pathSelector: PathSelector<TSchema, TValue>): FormLens<TValue> {\r\n    const path = useMemo(() => \r\n        Array.isArray(pathSelector) ? \r\n            pathSelector :\r\n            realizePath(pathSelector),\r\n        [pathSelector]);\r\n\r\n    // This is inefficient, but with memoization it is probably suitable for the near-term.\r\n    // if there are any perf issues with render / changes to the validation errors this is the first place to look.\r\n    // TODO(nibeauli): investigate if the debounce/throttle memo hooks are useful here?\r\n    const validationErrors = useMemo(() => modelForm.validationErrors.filter(error => isSuperPath(path, error.path)),\r\n        [modelForm.validationErrors, path]);\r\n\r\n    // lodash has challenges with typing, so we'll just cast this for now.\r\n    // also for some reason it thinks the empty path means undefined and not just the original object.\r\n    const base = path.length > 0 ? get(modelForm.base, path) : modelForm.base as Immutable<TValue>;\r\n    const current = path.length > 0 ? get(modelForm.current, path) : modelForm.current as Immutable<TValue>;\r\n\r\n    const updateValue = useCallback((cb: Parameters<FormUpdater<TValue>>[0]) => {\r\n        const next = produce(current, cb);\r\n        modelForm.update(model => {\r\n            set(model, path, next);\r\n        });\r\n    }, [current]);\r\n\r\n    const clearValue = useCallback(() => {\r\n        modelForm.update(model => {\r\n            set(model, path, base);\r\n        });\r\n    }, [current]);\r\n\r\n    return {\r\n        base,\r\n        current,\r\n        update: updateValue,\r\n        clear: clearValue,\r\n        validationErrors\r\n    };\r\n}\r\n","\r\n/**\r\n * Check if one path is a super-path of another.\r\n *\r\n * Note: this implementation is probably grossly inefficient.\r\n * @param superPath\r\n * @param subPath\r\n * @returns\r\n */\r\n\r\nimport { FormPath } from \"@tdp/common/form\";\r\n\r\nexport function isSuperPath(superPath: FormPath, subPath: FormPath) {\r\n    return superPath.every((part, index) => part === subPath[index]);\r\n}\r\n","import { Immutable } from 'immer';\r\n/**\r\n * Utility function for generating 'paths' into an object.\r\n * \r\n * Useful for typing methods like lodash's get and set.\r\n * \r\n * @param selector \r\n * @returns a path (array) into the object\r\n */\r\nexport function pathSelector<From extends Pathable, To>(selector: PathSelector<From, To>) {\r\n    const proxy = createPathTrackingProxy<From>();\r\n    // manual cast because we don't want to pollute the signature of the selector to include the symbol.\r\n    const result = selector(proxy) as PathSelectionWrapperInternal<To>;\r\n    return result[PathSymbol];\r\n}\r\n\r\nfunction isNumber(p: string) {\r\n    return !isNaN(parseFloat(p));\r\n}\r\n\r\nexport type Pathable = Record<string, unknown> | unknown[];\r\n/**\r\n * Type for wrapping an existing type and ensuring that it is only treated as an AST (no setting or calling of properties or sub-properties)\r\n */\r\nexport type PathSelectionWrapper<T extends Pathable | unknown> = Immutable<T>;\r\n\r\n// Internal symbol for keeping track of the 'path' into the object\r\n// used to avoid pollution if someone goes and uses something clever like Object.keys\r\nconst PathSymbol = Symbol('path');\r\ntype PathSelectionWrapperInternal<T extends Pathable | unknown> = PathSelectionWrapper<T> & { [PathSymbol]: (number | string)[]};\r\nfunction createPathTrackingProxy<S extends Pathable | unknown>(basePath: (number | string)[] = []): PathSelectionWrapperInternal<S> {\r\n    return new Proxy<PathSelectionWrapperInternal<S>>({} as PathSelectionWrapperInternal<S>, {\r\n        get(_, prop) {\r\n            if (prop === PathSymbol) {\r\n                return basePath;\r\n            } else if (typeof prop === 'symbol') {\r\n                throw new Error('unable to path with symbols');\r\n            } else if (isNumber(prop)) {\r\n                return createPathTrackingProxy(basePath.concat(parseFloat(prop)));\r\n            } else {\r\n                return createPathTrackingProxy(basePath.concat(prop));\r\n            }\r\n        },\r\n        apply() {\r\n            // ideally the type system would erase the callable but that seems to cause issues with primitives like\r\n            // string no longer being valid strings. So we'll just throw an error here that should be caught by the\r\n            // developer during development. If this makes it to runtime it means the path selector code was never called. \r\n            throw new Error('Cannot call a function when during path selection.');\r\n        }\r\n    });\r\n}\r\n\r\nexport type PathSelector<From extends Pathable, To> = (o: PathSelectionWrapper<From>) => PathSelectionWrapper<To>;\r\n\r\nexport type PathsSelectorFrom<T extends Pathable> = \r\n    (o: PathSelectionWrapper<T>) => PathSelectionWrapper<unknown>[];\r\n\r\nexport type PathsSelectorTo<T extends unknown[]> = (o: PathSelectionWrapper<unknown>) => PathSelectionWrapper<T[number]>[];\r\n\r\n/**\r\n * Utility for defining a 'path' into a typed object in a type-safe manner.\r\n * @param selector \r\n * @returns \r\n */\r\nexport function pathsSelector<T extends Pathable>(selector: ((o: PathSelectionWrapper<T>) => PathSelectionWrapper<unknown>[])) {\r\n    const proxy = createPathTrackingProxy<T>();\r\n\r\n    // manual cast because we don't want to pollute the signature of the selector to include the symbol.\r\n    const results = selector(proxy) as PathSelectionWrapperInternal<unknown>[];\r\n    const paths = results.map(r => r[PathSymbol]);\r\n    return paths;\r\n}\r\n","import { Immutable } from \"immer\";\r\nimport { Checkbox } from \"@fluentui/react-components\";\r\nimport { useIntl } from \"react-intl\";\r\n\r\nimport { BotFrameworkBot } from \"@tdp/modules/bots\";\r\n\r\nimport { FormUpdater } from '@tdp/common/form';\r\nimport { PropsFor } from \"@tdp/common/shared/tsUtils\";\r\n\r\nexport type BotChannelsProps = {\r\n    className?: string\r\n    bot?: Immutable<BotFrameworkBot>\r\n    updateBot: FormUpdater<BotFrameworkBot>\r\n};\r\nexport const BotChannels = (props: BotChannelsProps) => {\r\n    const intl = useIntl();\r\n    const hasTeamsChannel = props.bot?.configuredChannels.some(v => v === \"msteams\") ?? false;\r\n    const hasM365Channel = props.bot?.configuredChannels.some(v => v === \"m365extensions\") ?? false;\r\n    const onToggleTeamsChannel: PropsFor<typeof Checkbox>['onChange'] = (ev) => {\r\n        ev.preventDefault();\r\n        props.updateBot(draft => {\r\n            draft.configuredChannels = hasTeamsChannel \r\n                ? draft.configuredChannels.filter(v => v !== 'msteams')\r\n                : draft.configuredChannels.concat(\"msteams\");\r\n        });\r\n    };\r\n    const onToggleM365Channel: PropsFor<typeof Checkbox>['onChange'] = (ev) => {\r\n        ev.preventDefault();\r\n        props.updateBot(draft => {\r\n            draft.configuredChannels = hasM365Channel\r\n                ? draft.configuredChannels.filter(v => v !== 'm365extensions')\r\n                : draft.configuredChannels.concat(\"m365extensions\");\r\n        });\r\n    };\r\n    return (\r\n        <div className={props.className}>\r\n            <h3>Channels</h3>\r\n            <section>\r\n                <Checkbox disabled={!props.bot} checked={hasTeamsChannel} onChange={onToggleTeamsChannel}\r\n                    label={intl.formatMessage({\r\n                        defaultMessage: \"Microsoft Teams\", \r\n                        description:\"radio button label for selecting Microsoft Teams bot channel\"})}/>\r\n                <Checkbox disabled={!props.bot} checked={hasM365Channel} onChange={onToggleM365Channel}\r\n                     label={intl.formatMessage({\r\n                        defaultMessage: \"Microsoft 365 Extensions (Preview}\",\r\n                        description: \"radio button label for selecting Microsoft 365 Extensions bot channel\"\r\n                    })} \r\n                />\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n","import { Immutable } from \"immer\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { Input } from \"@fluentui/react-components\";\r\n\r\nimport { BotFrameworkBot } from \"@tdp/modules/bots\";\r\nimport { FormUpdater } from '@tdp/common/form';\r\nimport { PropsFor } from \"@tdp/common/shared/tsUtils\";\r\n\r\nexport type BotConfigureProps = {\r\n    className?: string\r\n    bot?: Immutable<BotFrameworkBot>\r\n    updateBot: FormUpdater<BotFrameworkBot>\r\n};\r\nexport const BotConfigure = (props: BotConfigureProps) => {\r\n    const onMessagingEndpointChange: PropsFor<typeof Input>['onChange'] = (ev, data) => {\r\n        ev.preventDefault();\r\n        props.updateBot(draft => {\r\n            draft.messagingEndpoint = data.value;\r\n        });\r\n    };\r\n    return (\r\n        <div className={props.className}>\r\n            <h3>\r\n                <FormattedMessage defaultMessage=\"Configure\" description={\"Title for the configure section of bot details\"}/>\r\n            </h3>\r\n            <section>\r\n                <h5>Endpoint Address</h5>\r\n                <Input value={props.bot?.messagingEndpoint} onChange={onMessagingEndpointChange}/>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n","import { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { Outlet } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles({\r\n    botDetailsContainer: {\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'row'\r\n    },\r\n    navPane: {\r\n        width: '320px',\r\n        height: '100%',\r\n    },\r\n    detailsPane: {\r\n        flexGrow: 1,\r\n        height: '100%'\r\n    }\r\n});\r\n\r\nexport type BotDetailsLayoutProps = {\r\n    navigationPane: JSX.Element\r\n};\r\nexport const BotDetailsLayout = ({navigationPane}: BotDetailsLayoutProps) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.botDetailsContainer}>\r\n            { navigationPane }\r\n            <div className={classes.detailsPane}>\r\n                <Outlet />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Immutable } from 'immer';\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { ToggleButton, makeStyles } from \"@fluentui/react-components\";\r\n\r\nimport { PropsFor } from \"@tdp/common/shared/tsUtils\";\r\nimport { BotFrameworkBot } from \"@tdp/modules/bots\";\r\n\r\nimport { BotNavHeader } from \"./BotNavHeader\";\r\n\r\nexport type BotDetailsNavProps = {\r\n    className?: string,\r\n    bot?: Immutable<BotFrameworkBot>\r\n};\r\nexport const BotDetailsNav = ({ className, bot }: BotDetailsNavProps) => {\r\n    return (\r\n        <div className={className}>\r\n            <BotNavHeader bot={bot} />\r\n            <NavLinkItem disabled={!bot} path={'configure'}>\r\n                <FormattedMessage\r\n                    defaultMessage=\"Configure\"\r\n                    description=\"Navigation button to the configuration section of bot details\" />\r\n            </NavLinkItem>\r\n            <NavLinkItem disabled={!bot} path={'channels'}>\r\n                <FormattedMessage\r\n                    defaultMessage=\"Channels\"\r\n                    description=\"Navigation button to the channels section of bot details\" />\r\n            </NavLinkItem>\r\n            <NavLinkItem disabled={true} path={'events'}>\r\n                <FormattedMessage\r\n                    defaultMessage=\"Events\"\r\n                    description=\"Navigation button to the events section of bot details\" />\r\n            </NavLinkItem>\r\n            <NavLinkItem disabled={true} path={'client-secrets'}>\r\n                <FormattedMessage\r\n                    defaultMessage=\"Client secrets\"\r\n                    description=\"Navigation button to the client secrets section of bot details\" />\r\n            </NavLinkItem>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst useNavLinkStyles = makeStyles({\r\n    button: {\r\n        width: '100%',\r\n        justifyContent: 'left'\r\n    }\r\n});\r\ntype NavLinkItemProps = {\r\n    path: string, //TODO(nibeauli) should this be a union type of all possible paths? how do we keep that in sync with the router(s)?\r\n} & PropsFor<typeof ToggleButton>;\r\nconst NavLinkItem = (props: NavLinkItemProps) => {\r\n    const classes = useNavLinkStyles();\r\n    return (\r\n        <NavLink to={props.path}>\r\n            {({ isActive }) => (<ToggleButton className={classes.button} checked={isActive} appearance=\"subtle\" {...props} />)}\r\n        </NavLink>\r\n    );\r\n};\r\n","import { Immutable } from \"immer\";\r\nimport { FormattedMessage, useIntl } from 'react-intl';\r\nimport { Checkbox } from \"@fluentui/react-components\";\r\n\r\nimport { BotFrameworkBot } from \"@tdp/modules/bots\";\r\nimport { FormUpdater } from '@tdp/common/form';\r\nimport { PropsFor } from \"@tdp/common/shared/tsUtils\";\r\n\r\nexport type BotEventsProps = {\r\n    className?: string\r\n    bot?: Immutable<BotFrameworkBot>\r\n    updateBot: FormUpdater<BotFrameworkBot>\r\n};\r\nexport const BotEvents = (props: BotEventsProps) => {\r\n    const intl = useIntl();\r\n    const hasTeamsChannel = props.bot?.configuredChannels.some(v => v === \"msteams\") ?? false;\r\n    const hasM365Channel = props.bot?.configuredChannels.some(v => v === \"m365extensions\") ?? false;\r\n    const onToggleTeamsChannel: PropsFor<typeof Checkbox>['onChange'] = (ev) => {\r\n        ev.preventDefault();\r\n        props.updateBot(draft => {\r\n            draft.configuredChannels = hasTeamsChannel \r\n                ? draft.configuredChannels.filter(v => v !== 'msteams')\r\n                : draft.configuredChannels.concat(\"msteams\");\r\n        });\r\n    };\r\n    const onToggleM365Channel: PropsFor<typeof Checkbox>['onChange'] = (ev) => {\r\n        ev.preventDefault();\r\n        props.updateBot(draft => {\r\n            draft.configuredChannels = hasM365Channel\r\n                ? draft.configuredChannels.filter(v => v !== 'm365extensions')\r\n                : draft.configuredChannels.concat(\"m365extensions\");\r\n        });\r\n    };\r\n    return (\r\n        <div className={props.className}>\r\n            <h3>\r\n                <FormattedMessage\r\n                    defaultMessage=\"Meeting event subscriptions\"\r\n                    description=\"Title for the event subscriptions page in bot details\" />\r\n            </h3>\r\n            <section>\r\n                <Checkbox disabled={!props.bot} checked={hasTeamsChannel} onChange={onToggleTeamsChannel}\r\n                    label={intl.formatMessage({\r\n                        defaultMessage: \"Participant join\",\r\n                        description: \"Label for the participant join event subscription opt-in\"\r\n                    })}/>\r\n                <Checkbox disabled={!props.bot} checked={hasM365Channel} onChange={onToggleM365Channel}\r\n                    label={intl.formatMessage({\r\n                        defaultMessage: \"Participant leave\",\r\n                        description: \"Label for the participant leave event subscription opt-in\"\r\n                    })}/>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n","import { makeStyles, Image, Skeleton, SkeletonItem, shorthands, tokens } from \"@fluentui/react-components\";\r\nimport { BotFrameworkBot } from \"@tdp/modules/models/BotFrameworkBot\";\r\nimport { Immutable } from \"immer\";\r\n\r\nconst useStyles = makeStyles({\r\n    botNavHeader: {\r\n        paddingLeft: '1em',\r\n        boxSizing: 'border-box',\r\n        display: 'grid',\r\n        gridTemplateColumns: 'min-content 80%',\r\n        ...shorthands.gap('10px'),\r\n        alignItems: 'center',\r\n    },\r\n    botImage: {\r\n        maxHeight: '48px',\r\n        maxWidth: '48px',\r\n        backgroundColor: tokens.colorSubtleBackgroundSelected\r\n    }\r\n});\r\nexport type BotNavHeaderProps = {\r\n    className?: string\r\n    bot?: Immutable<BotFrameworkBot>\r\n};\r\nexport const BotNavHeader = ({bot}: BotNavHeaderProps) => {\r\n    const classes = useStyles();\r\n    return !bot ? <BotNavHeaderSkeleton /> : (\r\n        <div className={classes.botNavHeader}>\r\n            <Image className={classes.botImage} shape=\"square\" src={bot.iconUrl} />\r\n            <h2>{bot.name}</h2>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst BotNavHeaderSkeleton = () => {\r\n    const classes = useStyles();\r\n    return (\r\n        <Skeleton>\r\n            <div className={classes.botNavHeader}>\r\n                <SkeletonItem shape=\"square\" size={48}/>\r\n                <SkeletonItem size={24}/>\r\n            </div>\r\n        </Skeleton> \r\n    );\r\n};\r\n","import { Immutable } from \"immer\";\r\nimport { Input } from \"@fluentui/react-components\";\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport { BotFrameworkBot } from \"@tdp/modules/bots\";\r\nimport { FormUpdater } from '@tdp/common/form';\r\nimport { PropsFor } from \"@tdp/common/shared/tsUtils\";\r\n\r\nexport type BotSecretsProps = {\r\n    className?: string\r\n    bot?: Immutable<BotFrameworkBot>\r\n    updateBot: FormUpdater<BotFrameworkBot>\r\n};\r\nexport const BotSecrets = (props: BotSecretsProps) => {\r\n    const onMessagingEndpointChange: PropsFor<typeof Input>['onChange'] = (ev, data) => {\r\n        ev.preventDefault();\r\n        props.updateBot(draft => {\r\n            draft.messagingEndpoint = data.value;\r\n        });\r\n    };\r\n    return (\r\n        <div className={props.className}>\r\n            <h3>\r\n                <FormattedMessage defaultMessage=\"Client secrets\" description={\"Title for the event subscriptions page in bot details\"} />\r\n            </h3>\r\n            <section>\r\n                <Input value={props.bot?.messagingEndpoint} onChange={onMessagingEndpointChange}/>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n","import { makeStyles, tokens } from \"@fluentui/react-components\";\r\nimport { useEffect } from \"react\";\r\nimport { Route, Routes, useParams, Navigate } from \"react-router-dom\";\r\n\r\nimport { useCommand, useSelector } from '@tdp';\r\nimport { createModelFormHook } from '@tdp/common/form/hooks';\r\n\r\nimport { botSlice, BotFrameworkBot, BotFrameworkBotSchema } from \"@tdp/modules/bots\";\r\n\r\nimport { BotDetailsNav } from \"./BotDetailsNav\";\r\nimport { BotDetailsLayout } from \"./BotDetailsLayout\";\r\nimport { BotConfigure } from \"./BotConfigure\";\r\nimport { BotChannels } from \"./BotChannels\";\r\nimport { BotEvents } from \"./BotEvents\";\r\nimport { BotSecrets } from \"./BotSecrets\";\r\n\r\nconst useStyles = makeStyles({\r\n    botDetailsContainer: {\r\n        backgroundColor: tokens.colorNeutralBackground1,\r\n        height: '100%',\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'row'\r\n    },\r\n    navPane: {\r\n        width: '320px',\r\n        height: '100%',\r\n    },\r\n    detailsPane: {\r\n        flexGrow: 1,\r\n        height: '100%'\r\n    }\r\n});\r\n\r\nconst useBotFrameworkFormObject = createModelFormHook(BotFrameworkBotSchema);\r\nconst emptyBot: BotFrameworkBot = {\r\n    botId: '',\r\n    callingEndpoint: null,\r\n    configuredChannels: [],\r\n    description: '',\r\n    iconUrl: '',\r\n    messagingEndpoint: '', \r\n    name: ''\r\n};\r\nexport const BotDetailsPage = () => {\r\n    const classes = useStyles();\r\n    const botForm = useBotFrameworkFormObject(emptyBot);\r\n    const { botId } = useParams<{botId: string}>();\r\n    //TODO(nibeauli): refactor the page hierarchy so all the /bots/ routes are under one container page that does this.\r\n    const loadBots = useCommand(commands => commands.botCommands.loadBots);\r\n    console.log('botId', botId);\r\n    useEffect(() => {\r\n        loadBots();\r\n    }, []);\r\n\r\n    const bot = useSelector(s => botId ? botSlice.selectors.selectById(s, botId) : undefined);\r\n    useEffect(() => {\r\n        if (bot) {\r\n            // This is a bit of a kludge to initialize the form. This pattern should be cleaner / normalized\r\n            botForm.update((oldBot)=> Object.assign(oldBot, bot));\r\n        }\r\n    }, [bot]);   \r\n\r\n    const isSkeleton = !bot;\r\n    return (\r\n        <div aria-busy={isSkeleton} className={classes.botDetailsContainer}>\r\n            {/* TODO(nibeauli): find a way of making this component reusable since we have this L2 nav pattern repeated */}\r\n            <Routes>\r\n                <Route element={<BotDetailsLayout navigationPane={<BotDetailsNav className={classes.navPane} bot={isSkeleton ? undefined : botForm.current}/>}/>}>\r\n                    <Route path=\"\" element={<Navigate to=\"configure\" replace />}></Route>\r\n                    <Route path=\"configure\" element={<BotConfigure bot={botForm.current} updateBot={botForm.update}/>} />\r\n                    <Route path=\"channels\" element={<BotChannels bot={isSkeleton ? undefined : botForm.current} updateBot={botForm.update}/>} />\r\n                    <Route path=\"events\" element={<BotEvents bot={isSkeleton ? undefined : botForm.current} updateBot={botForm.update}/>} />\r\n                    <Route path=\"client-secrets\" element={<BotSecrets bot={isSkeleton ? undefined : botForm.current} updateBot={botForm.update}/>} />\r\n                    <Route path=\"*\" element={<span> 404: We're not sure how you got here, but rest assured we'll get you back home in just a second. </span>} />\r\n                </Route>\r\n            </Routes>\r\n        </div>\r\n    );\r\n};\r\n"],"names":["useStyles","makeStyles","errorText","color","tokens","FormModelInput","lens","label","errorMapper","classes","onInputChange","useCallback","_","data","update","value","ErrorMapper","ZodErrorMapper","inputId","useId","errorsId","Label","htmlFor","Input","id","current","onChange","className","issues","validationErrors","errorMap","invalid_type","issue","message","invalid_literal","unrecognized_keys","invalid_union","invalid_union_discriminator","invalid_enum_value","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite","custom","map","index","key","code","createModelFormHook","schema","useValidation","createValidationHook","defaultValue","_useTemporaryState","state","clearState","updateState","base","clear","useMemo","result","safeParse","success","error","useFormValidations","modelForm","pathsSelector","paths","realizePaths","filter","some","path","isSuperPath","length","useZoom","pathSelector","Array","isArray","realizePath","get","updateValue","cb","next","produce","model","set","clearValue","superPath","subPath","every","part","selector","createPathTrackingProxy","PathSymbol","Symbol","basePath","Proxy","prop","_type_of","Error","isNaN","parseFloat","concat","apply","results","r","BotChannels","props","_props_bot_configuredChannels_some","_props_bot_configuredChannels_some1","intl","useIntl","hasTeamsChannel","bot","configuredChannels","v","hasM365Channel","Checkbox","disabled","checked","ev","preventDefault","updateBot","draft","formatMessage","defaultMessage","BotConfigure","_props_bot","FormattedMessage","messagingEndpoint","botDetailsContainer","backgroundColor","height","width","display","flexDirection","navPane","detailsPane","flexGrow","BotDetailsLayout","navigationPane","Outlet","BotDetailsNav","BotNavHeader","NavLinkItem","useNavLinkStyles","button","justifyContent","NavLink","to","isActive","ToggleButton","appearance","BotEvents","botNavHeader","paddingLeft","boxSizing","gridTemplateColumns","shorthands","alignItems","botImage","maxHeight","maxWidth","Image","shape","src","iconUrl","name","BotNavHeaderSkeleton","Skeleton","SkeletonItem","size","BotSecrets","useBotFrameworkFormObject","BotFrameworkBotSchema","emptyBot","botId","callingEndpoint","description","BotDetailsPage","botForm","useParams","loadBots","useCommand","commands","botCommands","console","log","useEffect","useSelector","s","botSlice","undefined","oldBot","Object","assign","isSkeleton","Routes","Route","element","Navigate","replace"],"mappings":"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"}